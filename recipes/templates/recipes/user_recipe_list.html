{% extends "recipes/base_menu.html" %}
{% block content %}
<h1 style="text-align:center;margin:20px;">All recipes for {{user.username}}</h1>
<p>
{% if recipe_list %}
<ul>
  {% for recipe in recipe_list %}
  <div class="post-wrapper">
        <div class="post">
            <div class="post-heading">
                <h2 class="title">
                    <a href="{% url 'recipes:recipe_detail'  recipe.id %}">{{ recipe.title }}</a>
                </h2>
            </div>
            <div class="card" style="height: 30vh;">
                {% if recipe.dish.recipe_type == "dessert" %}
                <img src="{% url 'dessert_path' %}" alt="Dessert image" style="width:100%; height:100%; object-fit:cover;">
                {% endif %}
                {% if recipe.dish.recipe_type == "salad" %}
                <img src="{% url 'salad_path' %}" alt="Salad image" style="width:100%; height:100%; object-fit:cover;">
                {% endif %}
                {% if recipe.dish.recipe_type == "entree" %}
                <img src="{% url 'entree_path' %}" alt="Entree image" style="width:100%; height:100%; object-fit:cover;">
                {% endif %}
            </div>
            <div class="post-content read-more-block">
                {{ recipe.ingredients }}
            </div>
            <div class="post-footer">
                <a class="read-more" href="{% url 'recipes:recipe_detail'  recipe.id %}">
                    Read More <i class="fa fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </div>
  {% endfor %}
</ul>
{% else %}
  <p>There are no recipes in the database.</p>
{% endif %}
</p>
<p>
<a href="{% url 'recipes:recipe_create' %}">Add a Recipe</a> |
{% if user.is_authenticated %}
<a href="{% url 'logout' %}?next={% url 'recipes:all' %}">Logout</a>
{% else %}
<a href="{% url 'login' %}?next={% url 'recipes:all' %}">Login</a>
{% endif %}
</p>
<script>
function favPost(url, thing_id) {
    console.log('Requesting JSON');
    $.post(url, {},  function(rowz){
        console.log(url, 'finished');
        $("#unfavorite_star_"+thing_id).toggle();
        $("#favorite_star_"+thing_id).toggle();
    }).fail(function(xhr) {
        alert('Url failed with '+xhr.status+' '+url);
    });
}
</script>
{% endblock %}
